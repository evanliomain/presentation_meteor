'use strict';

var pipelines = require('./pipelines');
var $ = require('./plugins');

// This is a generic method allowing to tranform a glou chaining method into a
// starting step as a global method on the glou object
module.exports = function initMethod(glouFn) {
  return function $initMethod() {
    // Decorates a start step with no state at all (this = null)
    var fn = pipelines.$decorate.call(null, function $start(parent, config) {
      return {
        stream: $.noop(),
        config: config,
      };
    });

    // Then call our method on it (pipe, src, â€¦)
    return fn[glouFn].apply(null, arguments);
  };
};
