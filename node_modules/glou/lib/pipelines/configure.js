'use strict';

var _ = require('lodash');

module.exports = function $initConfigure(configObj) {
  return this.$decorate(function $configure(parent, config) {
    var c = configObj;
    if (_.isFunction(c))
      c = c.call(config);
    return {
      stream: parent,
      config: config.merge(c),
    };
  });
};
